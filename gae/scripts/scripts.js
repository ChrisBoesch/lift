"use strict";var app=angular.module("liftApp",["ngCookies","ngResource","ngSanitize","ngRoute","ngProgress","ui.calendar","ui.bootstrap"]);app.config(["$routeProvider","$locationProvider",function(a,b){a.when("/home",{templateUrl:"views/home.html",controller:"HomeCtrl"}).when("/medicine",{templateUrl:"views/medicine.html",controller:"MedicineCtrl"}).when("/testResults",{templateUrl:"views/testResults.html",controller:"TestResultsCtrl"}).when("/history",{templateUrl:"views/history.html",controller:"HistoryCtrl"}).when("/meters",{templateUrl:"views/meters.html",controller:"MetersCtrl"}).when("/clinician",{templateUrl:"views/clinician.html",controller:"ClinicianCtrl"}).when("/",{templateUrl:"views/physician.html",controller:"PhysicianCtrl"}).when("/patients/:patient_id",{templateUrl:"views/patients.html",controller:"PatientsCtrl",resolve:{selectedPatient:function(a,b){var c=a.current.params.patient_id;return b.getPatientById(c)}}}).otherwise({redirectTo:"/"}),b.html5Mode(!0)}]),angular.module("liftApp").service("PatientService",function(){var a=2,b=[{id:1,firstName:"Patient",lastName:"One",name:"Patient One",address:"Address of the user",dateOfBirth:new Date,gender:"male",phoneNumber:"12345678901",emailAddress:"patient1@somewhere.com",prescriptions:[{id:1,name:"Amoxicillin",type:"tablet",quantity:60,dose:1,schedule:[1,0,1],date:new Date},{id:2,name:"Doxycycline 100 mg",type:"capsule",quantity:60,dose:1,schedule:[0,0,1],date:new Date},{id:3,name:"Cycloproxyvon 100 mg",type:"capsule",quantity:60,dose:1,schedule:[1,1,1],date:new Date},{id:4,name:"Monitor Glucose",schedule:[1,0,1],type:"data",date:new Date,range:{start:80,end:500}},{id:5,name:"Monitor Temperature",schedule:[1,1,1],type:"data",date:new Date,range:{start:90,end:110}}]},{id:2,name:"Patient Two",firstName:"Patient",lastName:"Two",address:"Address of the user",dateOfBirth:new Date,gender:"female",phoneNumber:"12345678901",emailAddress:"patient2@somewhere.com"}],c=new Date;c.setMonth(c.getMonth()-12);var d={gender:"male",dateOfBirth:c};return{getPatients:function(){return b},addPatient:function(c){c.id=++a,b.push(c)},getDefaultPatient:function(){return angular.extend({},d)},getPatientById:function(a){var c=null;return angular.forEach(b,function(b){b.id==a&&(c=b)}),c},getMedicationInformation:function(a){this.getPatientById(a)}}}),angular.module("liftApp").controller("NavbarCtrl",["$scope","$location",function(a,b){a.menu=[{title:"Overview",link:"/"},{title:"Health Meters",link:"/meters"},{title:"Medicine",link:"/medicine"},{title:"History",link:"/history"},{title:"Test Results",link:"/testResults"},{title:"Physician",link:"/physician"}],a.isActive=function(a){return a===b.path()},a.users=[{name:"Melba Brewster",username:"melba"},{name:"Harriett Hodges",username:"hhodges"},{name:"Thomas Frost",username:"tfrost"},{name:"Diane Sparks",username:"sparks231"}],a.activeUser=a.users[0],a.chooseUser=function(b){a.activeUser=b}}]),angular.module("liftApp").controller("HomeCtrl",["$scope",function(a){a.meters=["127","Abdominal Cramps","Benadryl","Calories","Constipation","Decreased Hearing","Ear Ache","Ear Echo Right"]}]);var Holder=Holder||{},app=angular.module("liftApp");app.directive("linechart",function(){return{template:"<div></div>",restrict:"E",link:function(a,b){b.text("this is the linechart directive")}}}),app.directive("holderFix",function(){return{link:function(a,b){Holder.run({images:b[0],nocss:!0})}}}),app.directive("setFocus",function(){return{restrict:"E",link:function(a,b){b[0].focus()}}}),angular.module("liftApp").controller("MedicineCtrl",["$scope",function(a){a.activeMedicines=[{drugName:"Metformin",dosage:"500 mg 2-3 times daily",classification:"Anti Diabetic agents"},{drugName:"Amidiopine",dosage:"2.5 mg once daily",classification:"Calcium Antagonist"},{drugName:"Catapres",dosage:"75-150 mgc twice daily",classification:"Anti Hypertensive"},{drugName:"Metopolol",dosage:"50-100 mg once daily",classification:"Beta Blockers"}]}]),angular.module("liftApp").controller("TestResultsCtrl",["$scope",function(a){a.testResults=[{testName:"Urine Test",date:"11/14/2013",result:"Normal"},{testName:"Blood Test",date:"11/14/2013",result:"Normal"},{testName:"Blood Glucose Test",date:"11/14/2013",result:"Normal"},{testName:"Blood Urea Nitrogen (BUN) Test",date:"11/14/2013",result:"Normal"},{testName:"Electrocardiogram (ECG) Test",date:"11/12/2013",result:"Normal"}]}]),angular.module("liftApp").controller("HistoryCtrl",["$scope",function(a){a.history=[{date:"December 5, 2012 6:00 PM",text:"Physician changed the dosage of Amelodopine from 2.5mg to 5mg daily"},{date:"November 10, 2012 5:00 PM",text:"Physician order: Take blood pressure every 4 hours"},{date:"November 09, 2012 6:00 PM",text:"Clinical Visit: Dr. Mendez at Philippine General Hospital",extraInfo:"Details..."},{date:"November 5, 2012 6:00 PM",text:"Physician prescribed the dosage of Amelodopine 2.5mg daily"}]}]),angular.module("liftApp").controller("MetersCtrl",["$scope",function(a){a.events=[{date:"11/14/2012 02:00PM",event:"Follow up checkup with Dr. Russel (Cardiologist)"},{date:"11/14/2012 08:00AM",event:"Amelodopine 10mg"},{date:"11/14/2012 06:00AM",event:"Light Jogging"},{date:"11/15/2012 09:00AM",event:"Physical Therapy Session with Dr. Santos(PT)"},{date:"11/15/2012 08:00AM",event:"Metformin 50mg"}]}]);var app=angular.module("liftApp");app.controller("ClinicianCtrl",["$scope",function(a){a.uiConfig={calendar:{height:450,editable:!0,header:{right:"month,agendaWeek,agendaDay",center:"title",left:"prev,next today"}}},a.eventSources=[],a.patientInfo=[{type:"chronic",number:80,percentage:40,icon:"fa-ambulance"},{type:"nominal",number:80,percentage:40,icon:"fa-medkit"},{type:"acute",number:20,percentage:10,icon:"fa-wheelchair"},{type:"new",number:20,percentage:10,icon:"fa-plus-square"}],a.transactionHistory=[{date:"Dec 5, 2012 5:00 PM",text:"[patient Eric] Increased dosage of Amlodopine from 2.5mg to 5mg daily"},{date:"Nov 16, 2012 9:00 AM",text:"[patient Eric] ordered to take blood pressure every 4 hours"},{date:"Nov 15, 2012 9:00 AM",text:"[patient Eric] regular clinical visit"},{date:"Nov 5, 2012 5:00 PM",text:"[patient Eric] Prescribed Amlodopine 2.5mg daily"}],a.prescriptionHistory=[{label:"Amlodopine 5mg Tablet",qty:30,dosage:"5mg OD",classification:"Calcium Antagonist",pharmacy:"Metro Drug"},{label:"Catapres 0.1mg tablet",qty:60,dosage:"0.1mg bd",classification:"Anti Hypertensive",pharmacy:"Metro Drug"},{label:"Metformin",qty:60,dosage:"500mg bd",classification:"Anti Diabetic Agent",pharmacy:"Metro Drug"},{label:"Metapolol Tablet",qty:30,dosage:"50mg OD",classification:"Beta Blockers",pharmacy:"Metro Drug"},{label:"Instamet",qty:60,dosage:"500mg",classification:"Anti Diabetic Agent",pharmacy:"Metro Drug"}]}]);var app=angular.module("liftApp");app.controller("PhysicianCtrl",["$scope","$modal","PatientService",function(a,b,c){a.patients=c.getPatients(),a.patient=c.getDefaultPatient(),a.openDialog=function(){a.modalInstance=b.open({templateUrl:"views/addPatient.html",controller:"AddPatientModalInstanceCtrl",resolve:{patient:function(){return a.patient}}}),a.modalInstance.result.then(function(b){var d={};angular.extend(d,b),d.name=d.firstName+" "+d.lastName,c.addPatient(d),a.patient=c.getDefaultPatient()},function(){console.log("Modal dismissed at: "+new Date),a.patient=c.getDefaultPatient(),a.canceled=!0})},a.openPrescriptionDialog=function(d){a.prescriptionDialogInstance=b.open({templateUrl:"views/prescriptions.html",controller:"PrescriptionInstanceController",windowClass:"prescription-modal",resolve:{patient:function(){return c.getPatientById(d)}}})}}]),app.controller("AddPatientModalInstanceCtrl",["$scope","$modalInstance","$filter","patient",function(a,b,c,d){a.patient=d,a.$watch("patient",function(b){b&&(a.dateString=c("date")(b.dateOfBirth,"yyyy-MM-dd"))}),a.cancel=function(){b.dismiss("cancel")},a.submit=function(c){c&&b.close(a.patient)}}]),app.controller("PrescriptionInstanceController",["$scope","$modalInstance","patient",function(a,b,c){a.patient=c;var d=["None",[1,0,0],[1,0,1],[1,1,1],4,5,6,8,12,24],e={dose:1,sched:2,type:"tablet",name:""};a.medication=angular.extend({},e),a.cancel=function(){b.dismiss("cancel")},a.submit=function(){b.close(a.patient)},a.addMedication=function(b){if(b){a.patient.prescriptions=a.patient.prescriptions||[];var c=d[a.medication.sched];a.medication.schedule=c,a.medication.date=new Date,a.patient.prescriptions.push(a.medication),a.medication=angular.extend({},e)}}}]);var app=angular.module("liftApp");app.filter("toHumanString",function(){return function(a){var b=["none","once","twice","thrice","four times","five times"],c=function(){var c=0;return angular.forEach(a,function(a){c+=a}),b[c]+" daily"};return angular.isArray(a)?c():"every "+a+" hours"}}),app.filter("prescriptionFor",function(){return function(a,b){var c=[];return angular.forEach(a,function(a){angular.isArray(a.schedule)&&1==a.schedule[b]&&this.push(a)},c),c}}),app.filter("rangeFor",function(){return function(a,b,c){for(var d=parseInt(b),e=parseInt(c),f=d;e>=f;f++)a.push(f);return a}}),angular.module("liftApp").controller("PatientsCtrl",["$scope","$routeParams","$filter","selectedPatient",function(a,b,c,d){function e(a,b){var c={};if(c.date=a,c.taken="not-taken",c.type=b.type,c.name=b.name,c.id=b.id,"data"==b.type){c.value=b.range.start,c.optionData=[];for(var d=c.value;d<b.range.end;d++)c.optionData.push(d)}return c}a.patient=d,a.day="Yesterday",a.today=new Date,a.dateStr=c("date")(a.today,"yyyyMMdd");var f=function(){var b={},d=new Date,e=new Date;e.setDate(e.getDate()-1);var f=a.dateStr=c("date")(e,"yyyyMMdd"),h=a.dateStr=c("date")(d,"yyyyMMdd"),i=g(f);b[f]=i;var j=g(h);return b[h]=j,b},g=function(b){var c=[],d={name:"Morning",medications:[]},f={name:"Afternoon",medications:[]},g={name:"Evening",medications:[]},h=a.patient.prescriptions;return angular.forEach(h,function(a){var c=a.schedule;if(angular.isArray(c)){if(1==c[0]){var h=e(b,a);d.medications.push(h)}if(1==c[1]){var h=e(b,a);f.medications.push(h)}if(1==c[2]){var h=e(b,a);g.medications.push(h)}}}),c.push(d),c.push(f),c.push(g),c};a.prescriptions=f(),a.selectedPrescriptions=a.prescriptions[a.dateStr],a.toggleDay=function(){var b=a.day;a.day="Yesterday"==b?"Today":"Yesterday";var d=new Date;d.setDate(d.getDate()-1),a.today="Yesterday"==b?d:new Date,a.dateStr=c("date")(a.today,"yyyyMMdd"),a.selectedPrescriptions=a.prescriptions[a.dateStr]},a.updateMedicineInfo=function(a,b){a.taken=b}}]);